<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Test Optimization System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• Lab Test Optimization System</h1>
            <p class="subtitle">Reducing unnecessary lab tests through intelligent recommendations</p>
        </header>

        <main>
            <!-- Patient Registration Section -->
            <section id="registration-section" class="section">
                <h2>Patient Registration & Symptom Input</h2>
                <form id="patient-form">
                    <div class="form-group">
                        <label for="patient-name">Patient Name:</label>
                        <input type="text" id="patient-name" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="patient-age">Age:</label>
                            <input type="number" id="patient-age" min="1" max="120" required>
                        </div>

                        <div class="form-group">
                            <label for="patient-gender">Gender:</label>
                            <select id="patient-gender" required>
                                <option value="">Select...</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="symptoms">Symptoms (comma-separated):</label>
                        <input type="text" id="symptoms" placeholder="e.g., fever, fatigue, weakness" required>
                        <small>Common symptoms: fever, fatigue, weakness, joint pain, chest pain, headache, abdominal pain, jaundice, frequent urination, weight loss</small>
                    </div>

                    <button type="submit" class="btn btn-primary">Submit & Get Recommendations</button>
                </form>
            </section>

            <!-- Recommendations Section -->
            <section id="recommendations-section" class="section hidden">
                <h2>Test Recommendations</h2>
                
                <div class="info-box">
                    <p><strong>Patient ID:</strong> <span id="display-patient-id"></span></p>
                    <p><strong>Visit ID:</strong> <span id="display-visit-id"></span></p>
                </div>

                <div id="recommended-tests-container">
                    <h3>‚úÖ Recommended Tests</h3>
                    <div id="recommended-tests-list"></div>
                </div>

                <div id="skipped-tests-container" class="hidden">
                    <h3>üö´ Tests Skipped (Recently Done)</h3>
                    <div id="skipped-tests-list"></div>
                </div>

                <button class="btn btn-secondary" onclick="showLabUploadSection()">Upload Lab Results</button>
                <button class="btn btn-secondary" onclick="resetForm()">New Patient</button>
            </section>

            <!-- Lab Results Upload Section -->
            <section id="lab-upload-section" class="section hidden">
                <h2>Upload Lab Results</h2>
                
                <div class="form-group">
                    <label for="test-select">Select Test:</label>
                    <select id="test-select">
                        <option value="">Select a test...</option>
                        <option value="CBC">Complete Blood Count (CBC)</option>
                        <option value="CRP">C-Reactive Protein (CRP)</option>
                        <option value="Blood_Glucose">Fasting Blood Glucose</option>
                        <option value="Lipid_Profile">Lipid Profile</option>
                        <option value="Thyroid_Panel">Thyroid Panel</option>
                        <option value="Liver_Function">Liver Function Tests</option>
                        <option value="Kidney_Function">Kidney Function Tests</option>
                        <option value="Vitamin_D">Vitamin D</option>
                    </select>
                </div>

                <div id="parameters-input-container"></div>

                <button class="btn btn-primary" onclick="submitLabResults()">Submit Lab Results</button>
                <button class="btn btn-secondary" onclick="backToRecommendations()">Back to Recommendations</button>
            </section>

            <!-- Interpretation Section -->
            <section id="interpretation-section" class="section hidden">
                <h2>Lab Results Interpretation</h2>
                
                <div class="interpretation-box patient-view">
                    <h3>üë§ Patient-Friendly Explanation</h3>
                    <div id="patient-interpretation"></div>
                </div>

                <div class="interpretation-box clinician-view">
                    <h3>üë®‚Äç‚öïÔ∏è Clinician Summary</h3>
                    <div id="clinician-interpretation"></div>
                </div>

                <button class="btn btn-secondary" onclick="resetForm()">New Patient</button>
            </section>

            <!-- Loading Indicator -->
            <div id="loading" class="hidden">
                <div class="spinner"></div>
                <p>Processing...</p>
            </div>
        </main>

        <footer>
            <p>Lab Test Optimization System | Academic Research Project</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
